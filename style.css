/* ================== DESIGN TOKENS & SETUP ================== */
:root{
  /* Core Brand */
  --primary-blue:#5C80BC; --primary-blue-rgb:92,128,188;
  --success-green:#34C759; --warning-yellow:#FF9500; --error-red:#FF3B30;

  /* Neutral Palette */
  --bg:#f5f5f7;
  --text-primary:#1d1d1f; --text-secondary:#6e6e73; --text-tertiary:#86868b;
  --fill-primary:#fff; --fill-secondary:#f2f2f4; --fill-tertiary:#ebebee;
  --separator:#d1d1d6;
  
  /* Layout */
  --maxw:1200px;
  --rail-pad:24px;
  --sp-4:4px; --sp-8:8px; --sp-12:12px; --sp-16:16px; --sp-24:24px; --sp-32:32px; --sp-48:48px;

  /* Controls */
  --control-h:52px;
  --head-pad-y:12px;
  --head-gap-bottom:12px; 
  
  /* Radius & Shadows */
  --radius-large:18px; --radius-medium:12px; --radius-small:8px;
  --shadow-sm:0 4px 12px rgba(0,0,0,0.08);
  --shadow-glow:0 0 0 3px rgba(var(--primary-blue-rgb),.2);

  /* Motion */
  --duration-fast:.18s; --duration-normal:.28s; --duration-slow:.36s;
  --ease-out-modern:cubic-bezier(.22,.68,0,1.08);
}

/* Dark Mode */
body.dark-mode{
  --bg:#000; --text-primary:#f5f5f7; --text-secondary:#8e8e93; --text-tertiary:#636366;
  --fill-primary:#1c1c1e; --fill-secondary:#2c2c2e; --fill-tertiary:#3a3a3c; --separator:#38383a;
  --shadow-sm:0 4px 12px rgba(0,0,0,0.25);
}

/* Reset */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; background:var(--bg); color:var(--text-primary);
  font-family:'Inter', -apple-system,BlinkMacSystemFont,"SF Pro Text","Segoe UI",Roboto,Helvetica,Arial,sans-serif;
  font-size:16px; line-height:1.5; letter-spacing:-.01em;
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
  transition: background var(--duration-normal), color var(--duration-normal);
  padding:env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
}
h1{ font-size:clamp(28px,3.5vw,38px); font-weight:800; letter-spacing:-.025em; }
p{ font-size:clamp(16px,2vw,18px); color:var(--text-secondary); }
.icon{ width:22px; height:22px; stroke-width:1.5; border-radius:20%; transition:transform var(--duration-fast), filter var(--duration-fast); }

@media(prefers-reduced-motion:reduce){
  *,*::before,*::after{animation-duration:.01ms!important;transition-duration:.01ms!important}
}
.noscript-warning{padding:16px;background:var(--warning-yellow);color:#000;text-align:center;font-weight:700}

/* ================== SCROLL & TRANSITIONS ================== */
.view-section{display:none;opacity:0;transform:translateY(10px);transition:opacity var(--duration-normal) var(--ease-out-modern), transform var(--duration-normal) var(--ease-out-modern);}
.view-section.active{display:block;opacity:1;transform:translateY(0);}
.reveal-on-scroll{opacity:0;transform:translateY(30px);transition:opacity .6s var(--ease-out-modern), transform .6s var(--ease-out-modern);}
.reveal-on-scroll.is-visible{opacity:1;transform:translateY(0);}

/* ================== LAYOUT ================== */
.wrap{max-width:var(--maxw);margin:0 auto;padding:var(--sp-48) var(--rail-pad);}
header{text-align:center;margin-bottom:var(--sp-24)}
.logo{height:44px;width:auto}
header h1{margin:10px 0 0;}
header p{margin:4px 0 0;}

/* ================== MENU & BURGER ================== */
.head-block{margin-bottom:var(--head-gap-bottom)}
.po-head,.cat-head{position:sticky;top:0;z-index:10;padding:var(--head-pad-y) 0;background:rgba(245,245,247,.8);backdrop-filter:blur(12px);}
body.dark-mode .po-head,body.dark-mode .cat-head{background:rgba(0,0,0,.75)}

.menu{position:absolute;z-index:100;right:0;top:calc(var(--control-h)+var(--sp-12));
  background:var(--fill-primary);border:1px solid var(--separator);border-radius:var(--radius-medium);
  display:flex;flex-direction:column;min-width:210px;overflow:hidden;box-shadow:var(--shadow-sm);
  opacity:0;transform:translateY(-6px) scale(.98);
  transition:opacity var(--duration-normal) var(--ease-out-modern),transform var(--duration-normal) var(--ease-out-modern);
  pointer-events:none}
.menu.open{opacity:1;transform:translateY(0) scale(1);pointer-events:auto}
.menu-btn{padding:var(--sp-12) var(--sp-16);border:0;background:transparent;text-align:left;color:var(--text-primary);font-weight:700;font-size:15px;cursor:pointer;letter-spacing:-.01em;opacity:0;transition:opacity .2s var(--ease-out-modern),background-color var(--duration-fast);}
.menu.open .menu-btn{opacity:1}
.menu-btn:hover{background:var(--fill-secondary)}
.menu-divider{height:1px;background:var(--separator);margin:var(--sp-8) 0}

.burger span{display:block;width:18px;height:1.6px;background:var(--text-secondary);border-radius:1px;transition:transform .3s var(--ease-out-modern),opacity .3s;}
.burger span:not(:last-child){margin-bottom:3.3px}
.burger.active span:nth-child(1){transform:translateY(4.9px) rotate(45deg)}
.burger.active span:nth-child(2){transform:scaleX(0);opacity:0}
.burger.active span:nth-child(3){transform:translateY(-4.9px) rotate(-45deg)}

/* ================== CONTROLS ================== */
.topbar-grid{display:flex;align-items:center;gap:var(--sp-12)}
.topbar-actions{display:flex;align-items:center;gap:var(--sp-12)}
.icon-btn{position:relative;width:var(--control-h);height:var(--control-h);border:1px solid var(--separator);border-radius:var(--radius-medium);background:var(--fill-primary);display:grid;place-content:center;cursor:pointer;color:var(--text-secondary);transition:all var(--duration-fast) var(--ease-out-modern);}
.icon-btn:hover{background:var(--fill-secondary);transform:translateY(-2px);color:var(--primary-blue);}
.icon-btn:active .icon{transform:scale(.95);filter:drop-shadow(0 0 4px rgba(var(--primary-blue-rgb),.4));}

/* theme toggle icons */
#theme-toggle-btn .icon,#theme-toggle-btn-po .icon{position:absolute;top:50%;left:50%;transition:opacity var(--duration-normal) var(--ease-out-modern),transform var(--duration-normal) var(--ease-out-modern);}
.icon-sun{opacity:0;transform:translate(-50%,-50%) rotate(-90deg) scale(.5)}
.icon-moon{opacity:1;transform:translate(-50%,-50%) rotate(0) scale(1)}
body.dark-mode .icon-sun{opacity:1;transform:translate(-50%,-50%) rotate(0) scale(1)}
body.dark-mode .icon-moon{opacity:0;transform:translate(-50%,-50%) rotate(90deg) scale(.5)}

.custom-select-btn{width:100%;height:var(--control-h);padding:var(--sp-12) var(--sp-16);background:var(--fill-primary);border:1px solid var(--separator);border-radius:var(--radius-medium);color:var(--text-primary);font-size:16px;font-weight:700;text-align:left;display:flex;justify-content:space-between;align-items:center;cursor:pointer;transition:border-color var(--duration-fast),box-shadow var(--duration-fast);}
.custom-select-btn:focus-visible{border-color:var(--primary-blue);box-shadow:var(--shadow-glow);outline:none}

/* ================== FORMS & SEARCH ================== */
.search-wrap{position:relative}
.search-wrap .icon{position:absolute;left:var(--sp-16);top:50%;transform:translateY(-50%);color:var(--text-tertiary);pointer-events:none}
.search-input{width:100%;height:var(--control-h);padding:0 var(--sp-16) 0 48px;background:var(--fill-primary);border:1px solid var(--separator);border-radius:var(--radius-medium);font-size:16px;color:var(--text-primary);outline:none;transition:border-color var(--duration-fast),box-shadow var(--duration-fast);}
.search-input:focus-visible{border-color:var(--primary-blue);box-shadow:var(--shadow-glow);}
.search-input::placeholder{color:var(--text-tertiary)}

/* ================== CATALOG LIST ================== */
#viewCatalog{--list-gap:8px}
.list-container{display:grid;gap:var(--list-gap)}
.list-item{display:flex;justify-content:space-between;align-items:center;padding:var(--sp-16);background:var(--fill-primary);border:1px solid var(--separator);border-radius:var(--radius-medium);text-decoration:none;color:inherit;transition:transform var(--duration-fast),background-color var(--duration-fast),border-color var(--duration-fast),box-shadow var(--duration-fast);}
.list-item:hover{transform:translateY(-4px);background:var(--fill-secondary);border-color:var(--fill-tertiary);box-shadow:var(--shadow-sm);}
.list-item .title{font-size:15px;font-weight:700}
.list-item .price{font-size:15px;font-weight:800;color:var(--primary-blue)}

/* ================== PRE-ORDER ================== */
#viewPreorder .card{background:var(--fill-primary);border:1px solid var(--separator);border-radius:var(--radius-large);padding:18px;transition:all var(--duration-fast);}
#viewPreorder .card.clickable:hover{transform:translateY(-4px);background:var(--fill-secondary);box-shadow:var(--shadow-sm);}
.status-badge{padding:6px 12px;border-radius:9999px;font-size:11px;font-weight:900;text-transform:uppercase;letter-spacing:.04em}

/* ================== STATES ================== */
.empty{border:1px dashed var(--separator);border-radius:var(--radius-large);padding:56px;text-align:center;color:var(--text-secondary);font-size:16px}
.err{border:1px solid var(--error-red);background:rgba(255,59,48,.1);color:var(--error-red);border-radius:var(--radius-medium);padding:16px;text-align:center;font-weight:700}
.skeleton{position:relative;overflow:hidden;background-color:var(--fill-secondary);}
.skeleton::after{content:'';position:absolute;top:0;left:0;right:0;bottom:0;transform:translateX(-100%);background-image:linear-gradient(90deg,transparent,rgba(255,255,255,0.2),transparent);animation:shimmer 1.5s infinite}
@keyframes shimmer{100%{transform:translateX(100%)}}

/* ================== RESPONSIVE (Container Queries style) ================== */
@container (min-width:600px){
  .list-container{grid-template-columns:repeat(2,1fr)}
}
@container (min-width:900px){
  .list-container{grid-template-columns:repeat(3,1fr)}
}
@media(min-width:769px){
  #viewPreorder .card-grid{grid-template-columns:repeat(auto-fill,minmax(400px,1fr))}
}
