/* ============================ TOKENS ============================ */
:root {
  --brand-blue: #5C80BC; --brand-blue-rgb: 92,128,188;
  --success: #3dc1d3; --warning: #f5cd79; --error: #c44569;
  --dark-base: #303952;

  --bg-primary: #f3f3f3; --bg-primary-rgb: 243,243,243;
  --surface-primary: #ffffff; --surface-secondary: #f0f0f0;
  --text-primary: #1a1a1a; --text-secondary: #5a5a5a;
  --separator: rgba(0,0,0,0.08);

  --bg-primary-dark: #0f1115;
  --surface-primary-dark: #141821;
  --surface-secondary-dark: #1a2030;
  --text-primary-dark: #eef1f7;
  --text-secondary-dark: #a9b0bd;
  --separator-dark: rgba(255,255,255,0.09);

  --font-size-h1: clamp(28px, 4.2vw, 44px);
  --font-size-h2: clamp(20px, 3vw, 28px);
  --font-size-body: clamp(14px, 1.5vw, 16px);

  --sp-fib-1: 3px; --sp-fib-2: 5px; --sp-fib-3: 8px;
  --sp-fib-4: 13px; --sp-fib-5: 21px; --sp-fib-6: 34px; --sp-fib-7: 55px;

  --control-h: 48px;
  --radius-fib-small: 8px; --radius-fib-medium: 13px; --radius-fib-large: 21px;
  --shadow-sm: 0 3px 8px rgba(48,57,82,0.08);
  --shadow-focus: 0 0 0 3px rgba(var(--brand-blue-rgb), .25);

  --duration-fast: .21s; --duration-natural: .34s; --duration-smooth: .55s;
  --ease-natural: cubic-bezier(.22,1,.36,1);
}

body.dark-mode {
  --bg-primary: var(--bg-primary-dark);
  --surface-primary: var(--surface-primary-dark);
  --surface-secondary: var(--surface-secondary-dark);
  --text-primary: var(--text-primary-dark);
  --text-secondary: var(--text-secondary-dark);
  --separator: var(--separator-dark);
}

/* ============================ BASE ============================ */
* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  background: var(--bg-primary);
  color: var(--text-primary);
  font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, Noto Sans, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol;
  -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;
}
img { max-width: 100%; display: block; }
button { font: inherit; color: inherit; background: none; border: 0; cursor: pointer; }
a { color: inherit; text-decoration: none; }

/* no-select untuk kartu & tombol (biar drag tak sengaja nggak terjadi) */
.list-item, .icon-btn, .btn, .burger { -webkit-user-select: none; -ms-user-select: none; user-select: none; }

h1 { font-size: var(--font-size-h1); letter-spacing: -0.025em; font-weight: 800; margin: 0; }
h2 { font-size: var(--font-size-h2); margin: 0; }
p { font-size: var(--font-size-body); color: var(--text-secondary); line-height: 1.5; margin: 0; }

@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after { animation-duration: .01ms !important; transition-duration: .01ms !important; }
}

/* ============================ VIEW & REVEAL ============================ */
.view-section { display: none; animation: fadeIn var(--duration-smooth) var(--ease-natural); }
.view-section.active { display: block; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(var(--sp-fib-5)); } to { opacity: 1; transform: translateY(0); } }

.reveal-on-scroll { opacity: 0; transform: translateY(var(--sp-fib-4)); transition: opacity var(--duration-smooth) var(--ease-natural), transform var(--duration-smooth) var(--ease-natural); }
.reveal-on-scroll.is-visible { opacity: 1; transform: translateY(0); }

.noscript-warning {
  padding: var(--sp-fib-4); text-align: center; font-weight: 700;
  background: var(--warning); color: var(--dark-base);
}

/* ============================ LAYOUT ============================ */
.wrap { max-width: 1200px; margin: 0 auto; padding: var(--sp-fib-7) var(--sp-fib-5); }
[data-rail] { width: 100%; padding: 0; margin: 0; }
header { text-align: center; margin-bottom: var(--sp-fib-7); }
.logo { height: var(--sp-fib-7); width: auto; }
header h1 { margin-top: var(--sp-fib-4); }

/* ============================ CARD & GRID ============================ */
.grid { display: grid; grid-template-columns: repeat(1, minmax(0,1fr)); gap: var(--sp-fib-5); }
@media (min-width: 560px) { .grid { grid-template-columns: repeat(2, minmax(0,1fr)); } }
@media (min-width: 900px) { .grid { grid-template-columns: repeat(3, minmax(0,1fr)); } }

.card {
  background: var(--surface-primary);
  border: 1px solid var(--separator);
  border-radius: var(--radius-fib-medium);
  box-shadow: var(--shadow-sm);
}

.empty {
  display: grid; place-content: center; text-align: center;
  padding: var(--sp-fib-6); color: var(--text-secondary);
  background: var(--surface-primary); border: 1px dashed var(--separator); border-radius: var(--radius-fib-medium);
}

/* ============================ TOOLBAR ============================ */
.toolbar {
  display: flex; align-items: center; gap: var(--sp-fib-4);
  background: var(--surface-primary); border: 1px solid var(--separator);
  border-radius: var(--radius-fib-medium); padding: var(--sp-fib-3);
}

.icon-btn, .btn {
  display: inline-grid; place-content: center;
  height: var(--control-h); padding: 0 var(--sp-fib-5);
  border: 1px solid var(--separator); border-radius: var(--radius-fib-small);
  background: var(--surface-primary);
  transition: transform var(--duration-fast) var(--ease-natural), box-shadow var(--duration-fast) var(--ease-natural), background var(--duration-fast);
}
.icon-btn { width: var(--control-h); padding: 0; }
.icon-btn:hover, .btn:hover { background: var(--surface-secondary); box-shadow: var(--shadow-sm); transform: translateY(-3px); }
.icon-btn:active, .btn:active { transform: translateY(0) scale(.97); }
.btn-primary { background: rgba(var(--brand-blue-rgb), .12); border-color: rgba(var(--brand-blue-rgb), .25); color: var(--brand-blue); }
.btn-primary:hover { background: rgba(var(--brand-blue-rgb), .18); }

#theme-toggle-btn, #theme-toggle-btn-po, #theme-toggle-btn-acc { overflow: hidden; position: relative; }
#theme-toggle-btn .icon, #theme-toggle-btn-po .icon, #theme-toggle-btn-acc .icon {
  position: absolute; top: 50%; left: 50%;
  transition: opacity var(--duration-natural) var(--ease-natural), transform var(--duration-natural) var(--ease-natural);
}
.icon { width: 20px; height: 20px; }
.icon-sun { opacity: 0; transform: translate(-50%,-50%) rotate(-90deg) scale(.5); }
.icon-moon { opacity: 1; transform: translate(-50%,-50%) rotate(0) scale(1); }
body.dark-mode .icon-sun { opacity: 1; transform: translate(-50%,-50%) rotate(0) scale(1); }
body.dark-mode .icon-moon { opacity: 0; transform: translate(-50%,-50%) rotate(90deg) scale(.5); }

/* ============================ BURGER ============================ */
.burger { display: grid; place-content: center; width: var(--control-h); height: var(--control-h); border: 1px solid var(--separator); border-radius: var(--radius-fib-small); background: var(--surface-primary); transition: background var(--duration-fast); }
.burger:hover { background: var(--surface-secondary); box-shadow: var(--shadow-sm); transform: translateY(-3px); }
.burger:active { transform: translateY(0) scale(.97); }
.burger span { display: block; width: 21px; height: 3px; background: var(--text-secondary); border-radius: 2px; transition: transform var(--duration-natural) var(--ease-natural), opacity var(--duration-natural); }
.burger span:not(:last-child) { margin-bottom: 5px; }
.burger.active span:nth-child(1) { transform: translateY(8px) rotate(45deg); }
.burger.active span:nth-child(2) { transform: scaleX(0); opacity: 0; }
.burger.active span:nth-child(3) { transform: translateY(-8px) rotate(-45deg); }

/* ============================ POPOVER MENU ============================ */
.menu { position: absolute; top: calc(100% + var(--sp-fib-3)); right: 0; min-width: 240px; background: var(--surface-primary); border: 1px solid var(--separator); border-radius: var(--radius-fib-medium); box-shadow: var(--shadow-sm); padding: var(--sp-fib-3); transform-origin: top right; transform: scale(.98) translateY(-6px); opacity: 0; pointer-events: none; transition: transform var(--duration-natural) var(--ease-natural), opacity var(--duration-natural) var(--ease-natural); z-index: 50; }
.menu.open { transform: scale(1) translateY(0); opacity: 1; pointer-events: auto; }
.menu-btn { display: block; width: 100%; text-align: left; padding: var(--sp-fib-4); border-radius: var(--radius-fib-small); background: transparent; }
.menu-btn:hover { background: var(--surface-secondary); }
.menu-divider { height: 1px; margin: var(--sp-fib-3) 0; background: var(--separator); }

/* ============================ SEARCH & SELECT ============================ */
.search { display: flex; gap: var(--sp-fib-3); }
.search-input, .select-native, .status-select {
  width: 100%; height: var(--control-h);
  background: var(--surface-primary); color: var(--text-primary);
  border: 1px solid var(--separator); border-radius: var(--radius-fib-small);
  outline: none; padding: 0 var(--sp-fib-5);
  transition: border-color var(--duration-fast), box-shadow var(--duration-fast), background var(--duration-fast);
}
.search-input:focus-visible, .select-native:focus-visible, .status-select:focus-visible { border-color: var(--brand-blue); box-shadow: var(--shadow-focus); }

.custom-select-wrapper { position: relative; flex-grow: 1; }
.custom-select-btn {
  display: flex; align-items: center; justify-content: space-between;
  width: 100%; height: var(--control-h); padding: 0 var(--sp-fib-5);
  background: var(--surface-primary); border: 1px solid var(--separator);
  border-radius: var(--radius-fib-small); font-weight: 700;
  transition: border-color var(--duration-fast), box-shadow var(--duration-fast), background var(--duration-fast);
}
.custom-select-btn[aria-expanded="true"] { border-color: var(--brand-blue); box-shadow: var(--shadow-focus); }
.custom-select-options {
  position: absolute; top: calc(100% + var(--sp-fib-2)); left: 0; right: 0; z-index: 20;
  background: var(--surface-primary); border: 1px solid var(--separator);
  border-radius: var(--radius-fib-small); box-shadow: var(--shadow-sm); max-height: 300px; overflow: auto; display: none;
}
.custom-select-wrapper.open .custom-select-options { display: block; }
.custom-select-option { padding: var(--sp-fib-4); cursor: pointer; }
.custom-select-option:hover, .custom-select-option.selected { background: var(--surface-secondary); }

/* native select caret (light/dark) */
.select-native { appearance: none; font-weight: 700; background-repeat: no-repeat; background-position: right var(--sp-fib-4) center; background-size: 18px; }
.select-native {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='rgba(0,0,0,.6)'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M8.25 15l3.25-3.5 3.25 3.5'/%3E%3C/svg%3E");
}
body.dark-mode .select-native {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='rgba(255,255,255,.7)'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M8.25 15l3.25-3.5 3.25 3.5'/%3E%3C/svg%3E");
}

/* ============================ LIST ITEM ============================ */
#list-container { display: grid; gap: var(--sp-fib-3); }
.list-item {
  display: grid; grid-template-columns: 1fr auto; gap: var(--sp-fib-4);
  padding: var(--sp-fib-4); border: 1px solid var(--separator);
  background: var(--surface-primary); border-radius: var(--radius-fib-small);
  transition: transform var(--duration-fast) var(--ease-natural), box-shadow var(--duration-fast) var(--ease-natural), background var(--duration-fast);
}
.list-item:hover { transform: translateY(-3px); box-shadow: var(--shadow-sm); background: var(--surface-secondary); }
.list-item .title { font-weight: 700; }
.list-item .price { font-weight: 800; color: var(--brand-blue); }

/* ============================ SKELETON ============================ */
.skeleton {
  background: linear-gradient(90deg, rgba(0,0,0,0.06) 25%, rgba(0,0,0,0.09) 37%, rgba(0,0,0,0.06) 63%);
  background-size: 400% 100%; animation: shimmer 1.2s infinite;
}
@keyframes shimmer { 0% { background-position: 100% 0; } 100% { background-position: -100% 0; } }

/* ============================ MODAL ============================ */
#paymentModal {
  position: fixed; inset: 0; display: none; place-items: center; z-index: 100;
  background: rgba(0,0,0,.28); backdrop-filter: blur(2px);
  opacity: 0; transform: translateY(6px); transition: opacity var(--duration-natural) var(--ease-natural), transform var(--duration-natural) var(--ease-natural);
}
#paymentModal.visible { display: grid; opacity: 1; transform: translateY(0); }

.modal-card { width: min(560px, 92vw); background: var(--surface-primary); border: 1px solid var(--separator); border-radius: var(--radius-fib-large); box-shadow: var(--shadow-sm); overflow: hidden; }
.modal-head { display: flex; align-items: center; justify-content: space-between; padding: var(--sp-fib-5) var(--sp-fib-6); border-bottom: 1px solid var(--separator); }
.modal-body { padding: var(--sp-fib-5) var(--sp-fib-6); display: grid; gap: var(--sp-fib-4); }
.payment-option { display: flex; align-items: center; justify-content: space-between; padding: var(--sp-fib-4); border: 1px solid var(--separator); border-radius: var(--radius-fib-small); }
.modal-actions { display: flex; gap: var(--sp-fib-4); padding: var(--sp-fib-5) var(--sp-fib-6); border-top: 1px solid var(--separator); }

/* ============================ PRE-ORDER ============================ */
.po-controls { display: grid; grid-template-columns: 1fr; gap: var(--sp-fib-3); }
@media (min-width: 760px) { .po-controls { grid-template-columns: 1fr 240px 160px; } }
.po-summary { display: flex; align-items: center; justify-content: space-between; padding: var(--sp-fib-4) var(--sp-fib-5); background: var(--surface-primary); border: 1px solid var(--separator); border-radius: var(--radius-fib-medium); }
.po-list { display: grid; gap: var(--sp-fib-3); }
.po-item { display: grid; grid-template-columns: 1fr auto; gap: var(--sp-fib-4); padding: var(--sp-fib-4); border: 1px solid var(--separator); background: var(--surface-primary); border-radius: var(--radius-fib-small); }
.po-badge { display: inline-grid; place-content: center; padding: 0 var(--sp-fib-4); height: 28px; border-radius: 999px; font-weight: 700; }
.status-success { background: rgba(61,193,211,.12); color: #148a99; border: 1px solid rgba(61,193,211,.35); }
.status-progress { background: rgba(245,205,121,.12); color: #9a6a00; border: 1px solid rgba(245,205,121,.35); }
.status-failed { background: rgba(196,69,105,.1); color: #a12a48; border: 1px solid rgba(196,69,105,.35); }
.status-pending { background: rgba(48,57,82,.08); color: #303952; border: 1px solid rgba(48,57,82,.25); }

/* ============================ ACCOUNTS ============================ */
.account-wrap { display: grid; gap: var(--sp-fib-5); }
@media (min-width: 960px) { .account-wrap { grid-template-columns: 360px 1fr; align-items: start; } }

.account-card { background: var(--surface-primary); border: 1px solid var(--separator); border-radius: var(--radius-fib-medium); overflow: hidden; }
.carousel { position: relative; aspect-ratio: 16/9; background: var(--surface-secondary); }
#carouselTrack { display: flex; height: 100%; transition: transform var(--duration-natural) var(--ease-natural); }
.carousel img { width: 100%; height: 100%; object-fit: cover; }
.carousel-nav { position: absolute; inset: 0; display: flex; align-items: center; justify-content: space-between; padding: 0 var(--sp-fib-4); pointer-events: none; }
.carousel-nav button { pointer-events: auto; }

#accountDisplay { display: grid; gap: var(--sp-fib-4); }
#accountDisplay .meta { display: grid; gap: var(--sp-fib-3); padding: var(--sp-fib-5); border-top: 1px solid var(--separator); }
#accountDisplay .meta .row { display: grid; grid-template-columns: 120px 1fr; gap: var(--sp-fib-3); align-items: center; }
#accountPrice { font-weight: 800; color: var(--brand-blue); }

.account-actions { display: grid; grid-template-columns: 1fr 1fr; gap: var(--sp-fib-3); padding: var(--sp-fib-5); border-top: 1px solid var(--separator); }

/* ============================ UTIL ============================ */
.text-muted { color: var(--text-secondary); }
.center { text-align: center; }
.mt-3 { margin-top: var(--sp-fib-3); }
.mt-4 { margin-top: var(--sp-fib-4); }
.mt-5 { margin-top: var(--sp-fib-5); }
